<% @title ||= Task.model_name.human; title @title %>
<%= go_back_btn mturk_batch_jobs_path %>

<div class="row justify-content-center mb-4">
  <div class="col-12">
    <h2 class='mb-4'>
      Tasks for batch '<%= @mturk_batch_job.name %>'
    </h2>
  </div>
  <div class="col-md-6 mb-4">
    <div class="card">
      <div class="card-body">
        <table class="table vertical-align borderless-table">
          <%= table_row('Total', @mturk_batch_job.tasks.count) %>
          <%= table_row('Unsubmitted', @mturk_batch_job.tasks.unsubmitted.count) %>
          <%= table_row('Submitted', @mturk_batch_job.tasks.submitted.count) %>
          <%= table_row('Assigned', @mturk_batch_job.tasks.assigned.count) %>
          <%= table_row('Completed', @mturk_batch_job.tasks.completed.count) %>
        </table>
      </div>
    </div>
  </div>
  <div class="col-md-6">
  </div>
</div>

<div class="row justify-content-center mb-4">
  <div class="col-12">
    <%= paginate @tasks %>
  </div>
</div>

<div class="row justify-content-center mb-4">
  <div class="col-12">
    <table class="table">
      <thead>
        <tr>
          <th>Id</th>
          <th>HIT Id</th>
          <th>Tweet Id</th>
          <th>Worker Id</th>
          <th>Time submitted</th>
          <th>Time assigned</th>
          <th>Time completed</th>
          <th>Lifecycle status</th>
          <th>Links</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <%= render @tasks %>
      </tbody>
    </table>
  </div>
</div>

<% unless @mturk_batch_job.is_submitted? %>
  <div class="row justify-content-center mb-4">
    <div class="col-12">
      <%= link_to 'Submit HITs', submit_mturk_batch_job_path(@mturk_batch_job), class: 'btn btn-warning btn-lg' %>
    </div>
  </div>
<% end %>
